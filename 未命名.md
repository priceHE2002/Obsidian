```python
import numpy as np
import matplotlib.pyplot as plt
import os

# --- 1. Mac 环境字体配置 (陈教授专用配置) ---
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'Heiti TC', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# --- 2. 信号处理逻辑 ---

def periodic_conjugate_decomposition(x):
    """
    将序列分解为周期共轭对称分量 (PCS) 和周期共轭反对称分量 (PCA)
    """
    N = len(x)
    k = np.arange(N)
    # 计算 x[(-k) mod N]
    # np.conj 是复共轭
    x_reverse_conj = np.conj(x[np.mod(-k, N)])
    
    # 公式：x_pcs[k] = 0.5 * (x[k] + x*[-k])
    x_pcs = 0.5 * (x + x_reverse_conj)
    
    # 公式：x_pca[k] = 0.5 * (x[k] - x*[-k])
    x_pca = 0.5 * (x - x_reverse_conj)
    
    return x_pcs, x_pca

# 定义一个非对称的实数序列 x[k]
# 长度 N = 6
x = np.array([1, 2, 3, 4, 2, 1], dtype=complex)
N = len(x)
k = np.arange(N)

# 进行分解
x_even, x_odd = periodic_conjugate_decomposition(x)

# 注意：对于实数序列，PCS 就是周期偶对称，PCA 就是周期奇对称
# x_even 应该是实数，x_odd 也是实数（如果是纯实数分解的话，但定义上PCA含复共轭）
# 对于实数输入：
# x_pcs 对应实部是偶对称，虚部是奇对称（这里输入是实数，所以虚部为0）
# x_pca 对应实部是奇对称，虚部是偶对称（这里输入是实数，所以虚部为0）

# --- 3. 绘图 ---
fig, ax = plt.subplots(3, 1, figsize=(8, 10))

# 原序列
ax[0].stem(k, np.real(x), basefmt=" ", label='实部')
ax[0].set_title(f'原始序列 x[k] (N={N})')
ax[0].set_ylim(-5, 5)
ax[0].grid(True, alpha=0.3)

# 周期共轭对称分量 (对于实信号即周期偶对称)
# 观察 k=1 (值=1.5) 和 k=5 (N-1, 值=1.5) 是否相等
ax[1].stem(k, np.real(x_even), basefmt=" ", linefmt='C1-', markerfmt='C1o')
ax[1].set_title('周期共轭对称分量 (实部) - 类似于偶对称')
ax[1].set_ylim(-5, 5)
ax[1].grid(True, alpha=0.3)
# 添加注释箭头展示对称性
ax[1].annotate('', xy=(1, np.real(x_even)[1]), xytext=(5, np.real(x_even)[5]),
            arrowprops=dict(arrowstyle="<->", color='red', lw=1.5, connectionstyle="arc3,rad=-0.2"))
ax[1].text(3, 3, "k=1 与 k=5 对称", color='red', ha='center')

# 周期共轭反对称分量 (对于实信号即周期奇对称)
# 观察 k=1 (值=0.5) 和 k=5 (N-1, 值=-0.5) 是否互为相反数
ax[2].stem(k, np.real(x_odd), basefmt=" ", linefmt='C2-', markerfmt='C2o')
ax[2].set_title('周期共轭反对称分量 (实部) - 类似于奇对称')
ax[2].set_ylim(-5, 5)
ax[2].grid(True, alpha=0.3)
# 添加注释箭头展示反对称性
ax[2].annotate('', xy=(1, np.real(x_odd)[1]), xytext=(5, np.real(x_odd)[5]),
            arrowprops=dict(arrowstyle="<->", color='blue', lw=1.5, connectionstyle="arc3,rad=0.2"))
ax[2].text(3, -3, "k=1 与 k=5 反对称", color='blue', ha='center')

plt.tight_layout()

# --- 4. 自动保存与显示 (固定配置) ---
filename = "周期共轭对称性演示.png"
vault_path = "/Users/heyuhang/Documents/Obsidian Vault"
full_path = os.path.join(vault_path, filename)

try:
    if os.path.exists(full_path):
        os.remove(full_path) # 覆盖旧图
    plt.savefig(full_path, dpi=300, bbox_inches='tight')
    plt.close() # 释放内存
    print(f"![[{filename}]]") # 触发 Obsidian 显示
except Exception as e:
    print(f"Error: {e}")
```