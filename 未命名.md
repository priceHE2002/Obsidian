```python
import numpy as np
import matplotlib.pyplot as plt
import os

# --- 1. Mac 环境字体配置 (陈教授专用配置) ---
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'Heiti TC', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# --- 2. 信号处理逻辑 ---

def decompose_sequence(x):
    """
    将序列分解为周期偶对称分量 (Even) 和周期奇对称分量 (Odd)
    """
    N = len(x)
    k = np.arange(N)
    # 计算圆周翻转序列 x[(-k) mod N]
    # 这里的 np.mod(-k, N) 实现了 (N-k)_N 的逻辑
    x_reverse = x[np.mod(-k, N)]
    
    # 根据教材公式计算偶分量和奇分量
    x_even = 0.5 * (x + x_reverse)
    x_odd = 0.5 * (x - x_reverse)
    
    return x_even, x_odd

# 生成一个示例序列
x = np.array([1, 2, 3, 4, 5], dtype=float)
N = len(x)
k = np.arange(N)

# 分解
xe, xo = decompose_sequence(x)

# 为了展示“延拓”的概念，我们手动构建周期延拓用于绘图
# 延拓范围从 -N 到 N
k_ext = np.arange(-N, N)
xe_ext = np.tile(xe, 3)[N:3*N] # 取中间部分对应 -N 到 N
xo_ext = np.tile(xo, 3)[N:3*N]

# --- 3. 绘图 ---
fig, ax = plt.subplots(3, 1, figsize=(10, 12))

# 原始序列
ax[0].stem(k, x, basefmt=" ", label='原始序列 x[k]')
ax[0].set_title(f'原始有限长序列 (N={N})')
ax[0].set_xlim(-1, N)
ax[0].grid(True, alpha=0.3)
ax[0].legend()

# 偶分量及其周期延拓
ax[1].stem(k, xe, basefmt=" ", linefmt='C1-', markerfmt='C1o', label='主值区间偶分量')
# 绘制虚线的周期延拓部分，展示轴对称性
ax[1].stem(np.arange(-N, 0), xe_ext[0:N], basefmt=" ", linefmt='C1:', markerfmt='C1.', label='隐含的周期延拓')
ax[1].set_title('周期偶延拓 (Periodic Even Extension)')
ax[1].text(0, np.max(xe)+0.5, "对称轴 (k=0)", ha='center', color='red')
ax[1].axvline(0, color='red', linestyle='--', alpha=0.5)
ax[1].grid(True, alpha=0.3)
ax[1].legend()

# 奇分量及其周期延拓
ax[2].stem(k, xo, basefmt=" ", linefmt='C2-', markerfmt='C2o', label='主值区间奇分量')
# 绘制虚线的周期延拓部分，展示中心对称性
ax[2].stem(np.arange(-N, 0), xo_ext[0:N], basefmt=" ", linefmt='C2:', markerfmt='C2.', label='隐含的周期延拓')
ax[2].set_title('周期奇延拓 (Periodic Odd Extension)')
ax[2].text(0, 0.5, "k=0处必须为0", ha='center', color='red')
ax[2].axvline(0, color='red', linestyle='--', alpha=0.5)
ax[2].grid(True, alpha=0.3)
ax[2].legend()

plt.tight_layout()

# --- 4. 自动保存与显示 (固定配置) ---
filename = "DFT序列偶奇延拓演示.png" 
vault_path = "/Users/heyuhang/Documents/Obsidian Vault"
full_path = os.path.join(vault_path, filename)

try:
    if os.path.exists(full_path):
        os.remove(full_path) # 覆盖旧图
    plt.savefig(full_path, dpi=300, bbox_inches='tight')
    plt.close() # 释放内存
    print(f"![[{filename}]]") # 触发 Obsidian 显示
except Exception as e:
    print(f"Error: {e}")
```