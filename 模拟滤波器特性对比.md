```python
import numpy as np
import matplotlib.pyplot as plt
import os
from scipy import signal

# --- 1. Mac 环境字体配置 (陈教授专用配置) ---
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'Heiti TC', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# --- 2. 信号处理逻辑：模拟滤波器特性对比 ---

# 设置滤波器参数
order = 4  # 阶数
Wn = 100   # 截止频率 (rad/s)
rp = 3     # 通带最大衰减 (dB) - 用于切比雪夫和椭圆
rs = 40    # 阻带最小衰减 (dB) - 用于椭圆

# 频率范围
w = np.linspace(0, 300, 1000)

# (1) 巴特沃斯 (Butterworth)
b_butter, a_butter = signal.butter(order, Wn, 'low', analog=True)
w_b, h_b = signal.freqs(b_butter, a_butter, worN=w)

# (2) 切比雪夫 I 型 (Chebyshev Type I)
b_cheby1, a_cheby1 = signal.cheby1(order, rp, Wn, 'low', analog=True)
w_c, h_c = signal.freqs(b_cheby1, a_cheby1, worN=w)

# (3) 椭圆 (Elliptic)
b_ellip, a_ellip = signal.ellip(order, rp, rs, Wn, 'low', analog=True)
w_e, h_e = signal.freqs(b_ellip, a_ellip, worN=w)

# --- 绘图逻辑 ---
fig, ax = plt.subplots(figsize=(10, 6))

# 绘制幅频响应 (幅度)
ax.plot(w_b, np.abs(h_b), 'b-', linewidth=2, label='巴特沃斯 (单调)')
ax.plot(w_c, np.abs(h_c), 'r--', linewidth=2, label='切比雪夫 I型 (通带波纹)')
ax.plot(w_e, np.abs(h_e), 'g-.', linewidth=2, label='椭圆 (过渡带最窄, 双向波纹)')

# 标注截止频率
ax.axvline(x=Wn, color='k', linestyle=':', alpha=0.5, label='截止频率')

# 设置图表属性
ax.set_title(f'三种典型 IIR 模拟滤波器幅频特性对比 (N={order})', fontsize=14)
ax.set_xlabel('角频率 $\Omega$ (rad/s)', fontsize=12)
ax.set_ylabel('幅度 $|H(j\Omega)|$', fontsize=12)
ax.grid(True, which='both', linestyle='--', alpha=0.7)
ax.legend(loc='best', fontsize=10)
ax.set_ylim(0, 1.2) # 限制Y轴便于观察通带

# --- 3. 自动保存与显示 (固定配置) ---
filename = "模拟滤波器特性对比.png" 
vault_path = "/Users/heyuhang/Documents/Obsidian Vault"
full_path = os.path.join(vault_path, filename)

try:
    if os.path.exists(full_path):
        os.remove(full_path) # 覆盖旧图
    plt.savefig(full_path, dpi=300, bbox_inches='tight')
    plt.close() # 释放内存
    print(f"![[{filename}]]") # 触发 Obsidian 显示
except Exception as e:
    print(f"Error: {e}")
```