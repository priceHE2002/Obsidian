```python
import numpy as np
import matplotlib.pyplot as plt
import os

# --- 1. Mac 环境字体配置 (陈教授专用配置) ---
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'Heiti TC', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# --- 2. 信号处理逻辑 ---

# 原始信号：长度 N=4 的矩形窗序列
x = np.array([1, 1, 1, 1])
N = 4

# 1. 计算 4 点 DFT (对应 PPT 左图)
X_4 = np.fft.fft(x)
freqs_4 = np.arange(N) * 2 * np.pi / N

# 2. 补零到 8 点 (对应 PPT 右图)
x_padded = np.concatenate([x, np.zeros(4)])
N_pad = 8
X_8 = np.fft.fft(x_padded)
freqs_8 = np.arange(N_pad) * 2 * np.pi / N_pad

# 3. 计算真正的 DTFT 曲线 (为了画出 PPT 中的蓝色虚线)
# 我们用极高密度的 DFT 来近似连续曲线
N_high = 1000
X_dtft = np.fft.fft(x, N_high)
freqs_dtft = np.arange(N_high) * 2 * np.pi / N_high

# --- 3. 绘图 ---
plt.figure(figsize=(10, 6))

# 绘制背景的 DTFT 连续曲线 (蓝色虚线)
plt.plot(freqs_dtft, np.abs(X_dtft), 'b--', label='DTFT 连续频谱 (真实全貌)', alpha=0.6)

# 绘制 4 点 DFT (红色圆点 - 左图情况)
plt.stem(freqs_4, np.abs(X_4), linefmt='r-', markerfmt='ro', basefmt=" ", label='4点 DFT (采样稀疏)')

# 绘制 8 点 DFT (绿色叉号 - 右图补零情况)
# 注意：这8个点中，有4个点其实就是上面的红点，另外4个是新“插”进去的
plt.stem(freqs_8, np.abs(X_8), linefmt='g:', markerfmt='gx', basefmt=" ", label='8点 DFT (补零后采样变密)')

plt.title('栅栏现象演示：DFT 只是对 DTFT 的采样')
plt.xlabel('数字角频率 $\Omega$ (rad)')
plt.ylabel('幅度')
plt.xlim(0, 2*np.pi)
plt.xticks([0, np.pi/2, np.pi, 3*np.pi/2, 2*np.pi], 
           ['0', r'$\pi/2$', r'$\pi$', r'$3\pi/2$', r'$2\pi$'])
plt.grid(True, alpha=0.3)
plt.legend()

# 添加注释
plt.text(np.pi/2, 0.5, '这就是栅栏现象：\n采样点刚好落在零点\n看不出波形的起伏', ha='center', color='red')

plt.tight_layout()

# --- 4. 自动保存与显示 (固定配置) ---
filename = "栅栏现象与补零原理演示.png"
vault_path = "/Users/heyuhang/Documents/Obsidian Vault"
full_path = os.path.join(vault_path, filename)

try:
    if os.path.exists(full_path):
        os.remove(full_path) # 覆盖旧图
    plt.savefig(full_path, dpi=300, bbox_inches='tight')
    plt.close() # 释放内存
    print(f"![[{filename}]]") # 触发 Obsidian 显示
except Exception as e:
    print(f"Error: {e}")
```