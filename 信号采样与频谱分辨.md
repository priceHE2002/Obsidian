```python
import numpy as np
import matplotlib.pyplot as plt
import os

# --- 1. Mac 环境字体配置 (陈教授专用配置) ---
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'Heiti TC', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# --- 2. 信号处理逻辑 ---

# 参数设置
fs = 1000  # 采样频率 1 kHz
N = 100    # 采样点数 (根据计算得出的最小值)
T = 1 / fs # 采样间隔

# 生成时间序列
k = np.arange(N)
t = k * T

# 构造信号 f(t)
# f(t) = 1 + 3sin(360πt + 0.1π) + 0.3cos(380πt + 0.15π)
f_t = 1 + \
      3 * np.sin(360 * np.pi * t + 0.1 * np.pi) + \
      0.3 * np.cos(380 * np.pi * t + 0.15 * np.pi)

# 计算 N 点 DFT (使用 FFT 算法)
X_k = np.fft.fft(f_t, N)
# 计算频率轴
freqs = np.fft.fftfreq(N, T)

# 取前 N/2 个点进行显示 (单边谱)
half_N = N // 2
freqs_half = freqs[:half_N]
mag_spectrum = np.abs(X_k)[:half_N] / N  # 归一化幅度
mag_spectrum[1:] = 2 * mag_spectrum[1:]  # 单边谱能量补偿 (直流分量除外)

# --- 绘图 ---
fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(10, 8))
plt.subplots_adjust(hspace=0.4)

# 1. 时域波形 (离散序列)
ax1.stem(k, f_t, basefmt=" ")
ax1.set_title(f'时域离散信号 x[k] (N={N}, fs={fs}Hz)', fontsize=14)
ax1.set_xlabel('采样点 k', fontsize=12)
ax1.set_ylabel('幅度', fontsize=12)
ax1.grid(True, alpha=0.3)

# 2. 频域幅度谱
ax2.stem(freqs_half, mag_spectrum, basefmt=" ", linefmt='C1-', markerfmt='C1o')
ax2.set_title(f'N={N} 点 DFT 幅度谱 (频率分辨率={fs/N}Hz)', fontsize=14)
ax2.set_xlabel('频率 (Hz)', fontsize=12)
ax2.set_ylabel('幅度', fontsize=12)
ax2.grid(True, alpha=0.3)

# 标注关键频率点
target_freqs = [0, 180, 190]
for f in target_freqs:
    # 找到最接近的频率索引
    idx = np.argmin(np.abs(freqs_half - f))
    val = mag_spectrum[idx]
    ax2.annotate(f'{f}Hz', xy=(f, val), xytext=(f, val + 0.5),
                 arrowprops=dict(facecolor='black', shrink=0.05),
                 horizontalalignment='center')

# --- 3. 自动保存与显示 (固定配置) ---
filename = "信号采样与频谱分辨.png"
vault_path = "/Users/heyuhang/Documents/Obsidian Vault"
full_path = os.path.join(vault_path, filename)

try:
    if os.path.exists(full_path):
        os.remove(full_path) # 覆盖旧图
    plt.savefig(full_path, dpi=300, bbox_inches='tight')
    plt.close() # 释放内存
    print(f"![[{filename}]]") # 触发 Obsidian 显示
except Exception as e:
    print(f"Error: {e}")
```